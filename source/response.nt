import {
  core.text {text-byte-length},
  this.field {Field},
  this.header {header},
}

data response {
| Response(
    protocol-version: text,
    status-code: int,
    fields: header,
    body: text,
  )
}

define text-response(status-code: int, body: text) {
  let len on body = text-byte-length(body) in
  Response of {
    protocol-version = *"HTTP/1.1",
    status-code,
    fields = [Field(*"content-length", %ld(len))],
    body,
  }
}
